{% extends 'layout/default/base.html' %} {% block title %} Rooms {% endblock %}
{% block header %} {% endblock %} {% block content %}
<div class="container" style="margin-top: 30px">
  <div class="checkout-container">
    <div class="row gy-xl-3">
      <div class="col-8 col-xl-12">
        <div class="cart-info">
          <h1 class="cart-info__heading">Booking information</h1>
          <div class="cart-info__separate"></div>

          <form class="form" method="post" action="/book" id="booker">
            <div class="booker">
              <div class="form__row">
                <div class="form__group">
                  <label for="name" class="form__label form__label--small"
                    >Name</label
                  >
                  <div class="form__text-input form__text-input--small">
                    <input
                      type="text"
                      name="name"
                      id="name"
                      placeholder="Name"
                      class="form__input"
                      required
                      minlength="2"
                      value="{{booking.name}}"
                      readonly
                    />
                  </div>
                  <p class="form__error">Name must be at least 2 characters</p>
                </div>
                <div class="form__group">
                  <label for="phone" class="form__label form__label--small"
                    >Phone</label
                  >
                  <div class="form__text-input form__text-input--small">
                    <input
                      type="tel"
                      name="phone"
                      id="phone"
                      placeholder="Phone"
                      class="form__input"
                      required
                      minlength="10"
                      maxlength="11"
                      value="+84{{booking.phone}}"
                      readonly
                    />
                  </div>
                  <p class="form__error">
                    Phone must be at least 10 characters
                  </p>
                </div>
              </div>
              <div class="form__group">
                <label for="email" class="form__label form__label--small"
                  >Email</label
                >
                <div class="form__text-input form__text-input--small">
                  <input
                    type="email"
                    name="email"
                    id="email"
                    placeholder="Email"
                    class="form__input"
                    required
                    minlength="2"
                    value="{{booking.email}}"
                    readonly
                  />
                </div>
                <p class="form__error">Example: thinh@gmail.com</p>
              </div>
              <div class="form__group">
                <label for="notes" class="form__label form__label--small"
                  >Notes</label
                >
                <div class="form__text-area">
                  <textarea
                    name="notes"
                    id="notes"
                    placeholder="Note your requirements"
                    class="form__text-area-input"
                    value="{{booking.notes}}"
                    readonly
                  ></textarea>
                </div>
              </div>
            </div>
          </form>

          <div class="cart-info__separate"></div>

          <h2 class="cart-info__sub-heading">Guests</h2>
          <div class="form__row">
            <div class="form__group">
              <label for="name" class="form__label form__label--small"
                >Name</label
              >
            </div>
            <div class="form__group">
              <label for="name" class="form__label form__label--small"
                >Identity</label
              >
            </div>
            <div class="form__group">
              <label for="name" class="form__label form__label--small"
                >Room</label
              >
            </div>
            <div class="form__group" style="flex: 0.4">
              <label for="name" class="form__label form__label--small"></label>
            </div>
          </div>
          <ul class="guest-list" data-room="">
            {% for guest_data in booking.get_guests() %} {% set guest =
            guest_data.get_guest() %}
            <li class="guest-item" data-id="{{guest.identity}}">
              <div class="form__row">
                <div class="form__group">
                  <div class="form__text-input form__text-input--small">
                    <input
                      type="text"
                      placeholder="Name"
                      class="form__input guest-name"
                      value="{{guest.name}}"
                      readonly
                    />
                  </div>
                </div>

                <div class="form__group">
                  <div class="form__text-input form__text-input--small">
                    <input
                      type="text"
                      placeholder="Identity number"
                      class="form__input guest-id"
                      pattern="[0-9]{12}"
                      maxlength="12"
                      required
                      value="{{guest.identity_num}}"
                      readonly
                    />
                  </div>
                </div>

                <div class="form__group">
                  <div class="form__text-input form__text-input--small">
                    <input
                      type="text"
                      placeholder="Identity number"
                      class="form__input guest-id"
                      value="Room: {{guest_data.get_room()}}"
                      readonly
                    />
                  </div>
                </div>

                <div class="form__group form__group--inline" style="flex: 0.4">
                  <label class="form__checkbox">
                    <input
                      type="checkbox"
                      class="form__checkbox-input d-none guest-vietnamese"
                      {%
                      if
                      guest.is_vietnamese
                      %}
                      checked
                      {%
                      endif
                      %}
                      disabled
                    />
                    <span class="form__checkbox-label">Vietnamese</span>
                  </label>
                </div>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <div class="col-4 col-xl-12">
        <div class="cart-info">
          <div class="cart-info__row">
            <a
              style="
                width: 100%;
                text-align: right;
                cursor: pointer;
                padding: 4px 2px;
              "
              onclick="history.back()"
            >
              <span><i class="fa-solid fa-chevron-left"></i></span>
              <span>Back</span>
            </a>
          </div>
          <div class="cart-info__row">
            <span>Check in</span>
            <span>{{booking.check_in}}</span>
          </div>
          <div class="cart-info__row">
            <span>Check out </span>
            <span>{{booking.check_out}}</span>
          </div>
          <div class="cart-info__row">
            <span
              >Subtotal <span class="cart-info__sub-label">(Rooms)</span></span
            >
            <span class="total-rooms">{{booking.rooms | length}}</span>
          </div>
          <div class="cart-info__separate"></div>
          <div class="cart-info__row">
            <span>Total</span>
            <span class="total-amount">${{booking.get_total()}}</span>
          </div>
          <button
            class="cart-info__next-btn btn btn--primary btn--rounded btn-remove btn--danger"
            style="width: 100%"
            type="submit"
          >
            Remove
          </button>
        </div>
        <div class="cart-info">
          <h2 class="cart-info__sub-heading">Rooms</h2>
          <div class="cart-info__listt">
            {% for room in booking.rooms %}
            <article class="cart-item" data-room="">
              <div class="cart-item__img">
                <img
                  src="/static/img/{{room.get_image().src}}"
                  class="cart-item__thumb"
                  alt=""
                  style="height: 120px; width: 80px"
                />
              </div>
              <div class="cart-item__info">
                <div class="cart-item__info-left">
                  <h3 class="cart-item__title">{{room.get_room_type()}}</h3>
                  <p class="cart-item__price-wrap">Room: {{room.name}}</p>
                  {% for expense in room.get_expense(booking.id) %}
                  <p class="cart-item__price-wrap">
                    ${{expense.expense}} |
                    <span class="cart-item__status">{{expense.name}}</span>
                  </p>
                  {% endfor %}
                </div>
                <div class="cart-item__info-right">
                  <p class="cart-item__total-price">${{room.get_price()}}</p>
                </div>
              </div>
            </article>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block javascript %}
<script
  type="text/javascript"
  src="{{ url_for('static', filename='js/checkout.js') }}"
></script>

{% endblock %} {% block footer%} {% endblock %}
